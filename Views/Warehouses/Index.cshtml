@model List<Warehouse>
@{
    ViewData["Title"] = "Depo Yönetimi";
}

<div class="stats-bar">
    <div class="stats-container" style="justify-content: center;">
        <div class="stat-mini">
            <div class="stat-icon purple">🏭</div>
            <div class="stat-content">
                <div class="stat-label">Toplam Depo</div>
                <div class="stat-value-mini">@Model.Count</div>
            </div>
        </div>
        <div class="stat-mini">
            <div class="stat-icon green">✅</div>
            <div class="stat-content">
                <div class="stat-label">Aktif Depo</div>
                <div class="stat-value-mini">@Model.Count(w => w.IsActive)</div>
            </div>
        </div>
    </div>
</div>

<div class="page-container">
    @if (TempData["Success"] != null)
    {
        <div class="alert alert-success">✅ @TempData["Success"]</div>
    }

    @if (TempData["Error"] != null)
    {
        <div class="alert alert-danger">❌ @TempData["Error"]</div>
    }

    <div class="section-header">
        <h1 class="section-title">🏭 Depo Yönetimi</h1>
        <div class="section-actions">
            <a href="/Warehouses/BarcodeScanner" class="btn btn-success">📷 Barkod Tarayıcı</a>
            <a href="/Warehouses/Counting" class="btn btn-primary">📦 Sayım Yap</a>
            <a href="/Warehouses/Transfer" class="btn btn-info">🔄 Transfer</a>
            <a href="/Warehouses/Create" class="btn btn-secondary">➕ Yeni Depo</a>
        </div>
    </div>

    <div class="product-grid">
        @foreach (var warehouse in Model)
        {
            <div class="cards-container">
                <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 16px;">
                    <div style="width: 60px; height: 60px; border-radius: 12px; background: linear-gradient(135deg, #7C3AED 0%, #EC4899 100%); display: flex; align-items: center; justify-content: center; font-size: 28px; box-shadow: 0 4px 12px rgba(124, 58, 237, 0.3);">
                        🏭
                    </div>
                    <div style="flex: 1;">
                        <h3 style="margin: 0; font-size: 18px; font-weight: 700;">@warehouse.Name</h3>
                        <p style="margin: 4px 0 0 0; color: var(--text-secondary); font-size: 13px;">@warehouse.Code</p>
                    </div>
                </div>

                <div style="display: flex; flex-direction: column; gap: 8px; padding-top: 16px; border-top: 1px solid var(--border);">
                    <div style="display: flex; justify-content: space-between; font-size: 13px;">
                        <span style="color: var(--text-secondary);">📍 Konum</span>
                        <span style="font-weight: 600;">@warehouse.Location</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 13px;">
                        <span style="color: var(--text-secondary);">📅 Oluşturulma</span>
                        <span style="font-weight: 600;">@warehouse.CreatedAt.ToString("dd.MM.yyyy")</span>
                    </div>
                </div>

                <div style="display: flex; gap: 8px; margin-top: 16px;">
                    <a href="/Warehouses/@warehouse.Id/Stock" class="btn btn-primary" style="flex: 1; justify-content: center;">
                        📋 Stok
                    </a>
                    <a href="/Warehouses/Edit/@warehouse.Id" class="btn btn-secondary" style="flex: 1; justify-content: center;">
                        ✏️ Düzenle
                    </a>
                </div>

                @if (User.IsInRole("Admin"))
                {
                    <form method="post" action="/Warehouses/Delete/@warehouse.Id" style="margin-top: 8px;">
                        @Html.AntiForgeryToken()
                        <button type="submit" class="btn btn-danger" style="width: 100%; justify-content: center;" onclick="return confirm('Bu depoyu silmek istediğinizden emin misiniz?')">
                            🗑️ Sil
                        </button>
                    </form>
                }
            </div>
        }
    </div>
</div>